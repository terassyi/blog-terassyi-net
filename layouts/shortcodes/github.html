<div class="github-card" data-repo="{{ .Get "repo" }}">
    <a href="https://github.com/{{ .Get "repo" }}" target="_blank" rel="noopener" class="github-link">
      <div class="github-icon">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.03 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
        </svg>
      </div>
      <div class="github-info">
        <div class="github-title">{{ .Get "repo" }}</div>
        {{ if .Get "description" }}
        <div class="github-description">{{ .Get "description" }}</div>
        {{ else }}
        <div class="github-description github-auto-description">Loading...</div>
        {{ end }}
        <div class="github-meta">
          <span class="github-language" style="display: none;">
            <span class="language-dot"></span>
            <span class="language-name"></span>
          </span>
          <span class="github-stat github-stars" style="display: none;">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
              <path d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"/>
            </svg>
            <span class="stars-count"></span>
          </span>
          <span class="github-stat github-forks" style="display: none;">
            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
              <path fill-rule="evenodd" d="M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.25 2.25 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878z"/>
            </svg>
            <span class="forks-count"></span>
          </span>
        </div>
      </div>
      <div class="github-arrow">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path fill-rule="evenodd" d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"/>
        </svg>
      </div>
    </a>
  </div>

  <style>
  .github-card {
    margin: 1.5rem 0;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
    background: #fff;
    transition: all 0.2s ease;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial;
  }

  .github-card:hover {
    border-color: #3b82f6;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
  }

  .github-link {
    display: flex;
    align-items: center;
    padding: 16px;
    text-decoration: none;
    color: inherit;
    gap: 12px;
  }

  .github-icon {
    flex-shrink: 0;
    color: #6b7280;
  }

  .github-info {
    flex: 1;
    min-width: 0;
  }

  .github-title {
    font-weight: 600;
    font-size: 14px;
    color: #111827;
    margin-bottom: 4px;
    word-break: break-all;
  }

  .github-description {
    font-size: 13px;
    color: #6b7280;
    line-height: 1.4;
    margin-bottom: 8px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .github-meta {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 12px;
    color: #6b7280;
  }

  .github-language {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .language-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
  }

  .github-stat {
    display: flex;
    align-items: center;
    gap: 3px;
  }

  .github-stat svg {
    color: #6b7280;
  }

  .github-arrow {
    flex-shrink: 0;
    color: #9ca3af;
    transition: transform 0.2s ease;
  }

  .github-link:hover .github-arrow {
    transform: translateX(2px);
  }

  @media (prefers-color-scheme: dark) {
    .github-card {
      background: #1f2937;
      border-color: #374151;
    }

    .github-title {
      color: #f9fafb;
    }

    .github-description,
    .github-meta {
      color: #d1d5db;
    }

    .github-icon {
      color: #9ca3af;
    }

    .github-stat svg {
      color: #9ca3af;
    }
  }
  </style>

  <script>
  (function() {
    const languageColors = {
      'Go': '#00ADD8',
      'JavaScript': '#f1e05a',
      'TypeScript': '#2b7489',
      'Python': '#3572a5',
      'Java': '#b07219',
      'C': '#555555',
      'C++': '#f34b7d',
      'Rust': '#dea584',
      'Ruby': '#701516',
      'PHP': '#4f5d95',
      'Swift': '#ffac45',
      'Kotlin': '#F18E33',
      'Shell': '#89e051',
      'HTML': '#e34c26',
      'CSS': '#1572B6'
    };

    const cards = document.querySelectorAll('.github-card');

    cards.forEach(async (card) => {
      const repo = card.dataset.repo;
      if (!repo) return;

      try {
        const response = await fetch(`https://api.github.com/repos/${repo}`);
        if (!response.ok) throw new Error('API request failed');

        const data = await response.json();

        // Description (自動取得または手動指定)
        const autoDescription = card.querySelector('.github-auto-description');
        if (autoDescription) {
          if (data.description) {
            autoDescription.textContent = data.description;
          } else {
            autoDescription.style.display = 'none';
          }
        }

        // Language
        const languageElement = card.querySelector('.github-language');
        const languageDot = card.querySelector('.language-dot');
        const languageName = card.querySelector('.language-name');

        if (data.language) {
          languageName.textContent = data.language;
          languageDot.style.backgroundColor = languageColors[data.language] || '#586069';
          languageElement.style.display = 'flex';
        }

        // Stars
        const starsElement = card.querySelector('.github-stars');
        const starsCount = card.querySelector('.stars-count');
        if (data.stargazers_count !== undefined) {
          starsCount.textContent = data.stargazers_count.toLocaleString();
          starsElement.style.display = 'flex';
        }

        // Forks
        const forksElement = card.querySelector('.github-forks');
        const forksCount = card.querySelector('.forks-count');
        if (data.forks_count !== undefined) {
          forksCount.textContent = data.forks_count.toLocaleString();
          forksElement.style.display = 'flex';
        }

      } catch (error) {
        console.error('Error fetching GitHub data:', error);
        // エラー時はLoading...を非表示にする
        const autoDescription = card.querySelector('.github-auto-description');
        if (autoDescription) {
          autoDescription.style.display = 'none';
        }
      }
    });
  })();
  </script>
